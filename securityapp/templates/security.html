{% extends "base.html" %}
{% block content %}
<h2>Security Section</h2>
{% if message %}
  <p>{{ message }}</p>
{% endif %}

<!-- Form to start the security system -->
<form method="post" style="margin-bottom: 20px;">
  {% csrf_token %}
  <input type="hidden" name="action" value="start">
  <button type="submit" style="background-color: white; color: black;">Start Security System</button>
</form>

<hr>

<!-- Form to upload a face image -->
<h3>Upload Face Image</h3>
<form method="post" enctype="multipart/form-data" style="margin-bottom: 20px;">
  {% csrf_token %}
  <input type="hidden" name="action" value="upload">
  <div>
    <label for="face_image">Select image:</label>
    <input type="file" name="face_image" accept="image/*" required>
  </div>
  <div>
    <label for="individual_type">Individual Type:</label>
    <select name="individual_type" required>
      <option value="protected">Protected</option>
      <option value="warning">Warning</option>
    </select>
  </div>
  <div style="margin-top: 10px;">
    <button type="submit" style="background-color: white; color: black;">Upload Face</button>
  </div>
</form>

<hr>

<!-- Live Video Feed Container -->
<div id="video-feed" style="margin-top:20px;">
  <h3>Live Video Feed</h3>
  <img id="video-feed-img" src="{% url 'video_feed' %}" alt="Video Feed" style="width:100%;">
</div>

<!-- JavaScript to hide the video feed when Escape is pressed -->
<script>
document.addEventListener('keyup', function(e) {
    if (e.key === "Escape") {
        var videoFeed = document.getElementById('video-feed');
        if (videoFeed) {
            videoFeed.style.display = 'none';
        }
    }
});
</script>
{% endblock %}
